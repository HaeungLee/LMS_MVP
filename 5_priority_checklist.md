## 우선순위별 세부 체크리스트 (실행 중심)

### Phase 0 — 계약 정합성 핫픽스 (D+2)
- [ ] 프론트 `/submit` 요청 페이로드를 서버 스키마에 맞추거나(권장)
      서버가 `{ answers, time_taken }`도 허용하도록 DTO 확장(둘 중 하나 선택)
  - DoD: 422 미발생, 샘플 제출 성공, 응답과 UI 100% 일치
- [ ] 결과 표시 정책 일원화: 인라인 완료 vs `/results` 중 선택 후 미사용 경로 제거
  - DoD: 제출 후 단일 경로로 결과 확인, 중복/로컬스토리지 의존 제거
- [ ] 대시보드 필드 정합성: `progress.username` 제거 또는 서버에서 필드 제공
  - DoD: 대시보드 렌더 오류 0
- [ ] 피드백 식별자: `feedback_id` 의존 제거 또는 서버 영속 ID 발급/조회로 변경
  - DoD: 피드백 열람/재열람 정상, 새로고침에도 접근 가능(선택: 캐시→DB)
- [ ] 타이머 카운트다운 구현 및 만료 시 제출/확인 모달
  - DoD: 타이머 0s 시 사용자 행동 유도(자동 제출 또는 확인)

### Phase 1 — 주 1 (D+7)
- [ ] 최소 차트 도입(주제별 정답률 도넛)
  - DoD: `/submit` 결과 기반 시각화 렌더, 반응형, 오류 0
- [ ] OpenRouter 1차 연동(단일 에이전트 + 캐시)
  - DoD: 피드백 API 실제 LLM 호출(타임아웃/재시도/폴백 포함), 캐시 적중 동작 확인
- [ ] PostgreSQL 연결 및 `submissions` 테이블 영속화(최소 경로)
  - DoD: 제출 기록 DB 저장, 재시작 후 기록 유지, 기본 인덱스 적용
- [ ] 정답 매칭 정교화 v1(공백/대소문/토큰 분리/동의어 최소 지원)
  - DoD: 샘플 20문항 오판정률 감소, 회귀 테스트 통과

### Phase 1 — 주 2 (D+14)
- [ ] 2-Agent 초안(채점→검증) 및 루브릭 반영
  - DoD: 검증 단계가 초안 피드백을 교열/점수 조정, 환각 방지 체크리스트 반영
- [ ] `questions` 조회 DB 전환 또는 JSON+인메모리 캐시 하이브리드(중 택1)
  - DoD: 응답 < 300ms, 캐시 무효화/리로드 전략 정의
- [ ] 결과/대시보드 지표 실데이터화(최근활동/취약영역)
  - DoD: 최근활동 DB 기반, 취약영역 계산 서버측 수행
- [ ] 에러/로깅/관측성 기초(요청ID, 오류 추적, 기본 대시보드)
  - DoD: 5xx/에러 케이스 로깅, 최소 대시보드(에러율/응답시간)

### Phase 2 — 도메인/권한(설계→초기 구현)
- [ ] 코스/모듈/레슨/수강/퀴즈/시도 스키마 설계(ERD 기준)
- [ ] JWT 인증 + RBAC(학생/교사/관리자) 미들웨어
- [ ] 문제 출제 CRUD(기본) + 태깅/난이도/버전 필드
- [ ] 시도/문항 단위 그레이드북 기본 집계

### 위험/의존성 체크
- [ ] OpenRouter 비용/쿼터: 캐시/레이트리밋/백오프 정책 확정
- [ ] DB 마이그레이션: 롤백/백업, 초기 이행 스크립트 작성
- [ ] 개인정보/보안: 로그 민감정보 마스킹, 비밀/키 관리(.env, vault)

### 권장 기술 결정(결정 대기 이슈)
- [ ] UI 라이브러리(MUI) 채택 여부 및 범위
- [ ] 차트 라이브러리(Recharts vs Chart.js) 선택
- [ ] DB 접근 계층(리포지터리/서비스) 패턴 합의
- [ ] 피드백 영속 저장 유무(정책/보관기간)

---

## 상세 DoD(Definition of Done) 샘플
- 계약 정합성: Swagger/Contract Test 녹색, E2E 제출→결과 플로우 무에러
- AI 피드백: 타임아웃<10초, 폴백 메시지 제공, 동일 요청 캐시 적중
- DB 영속화: 재시작 후 데이터 보전, 트랜잭션/인덱스 점검, 기본 페이지네이션
- 차트: 빈 데이터/에러 상태 처리, 모바일 뷰 정상, 컬러 콘트라스트 준수
- 로깅/관측성: 요청ID, 주요 실패 케이스 스택트레이스, 대시보드서 확인 가능


